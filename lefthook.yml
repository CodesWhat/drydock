---
pre-push:
  piped: true
  commands:
    zizmor:
      glob: '.github/workflows/*.yml'
      run: zizmor .github/workflows/
      skip:
        - run: '! command -v zizmor >/dev/null 2>&1'
    qlty:
      run: qlty check --no-progress
    snyk-deps:
      root: app/
      run: snyk test --severity-threshold=high --org=codeswhat
    snyk-code:
      run: scripts/snyk-code-gate.sh --org=codeswhat
    build:
      root: app/
      run: npm run build
    test:
      root: app/
      run: npm test
    ui-build:
      root: ui/
      run: npm run build
    ui-test:
      root: ui/
      run: npm run test:unit
    e2e:
      run: ./scripts/run-e2e-tests.sh
